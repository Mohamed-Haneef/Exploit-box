#include <stdio.h>
#include <string.h>
#include <stdlib.h>

void reverse_string(const char *string_r, char *rev) {
    int len = strlen(string_r);
    char temp[5];
    rev[0] = '\0';
/*

Looping Logic:

i - index of the overall string we are using
chunk_len - length of the number of char available in the 4 letter used to store in the temp
j - index of the chunk or it can be considered as the index that holds the value of the temp

clearing the temp variable after the temp loop and concatenating it with the reversed string

*/
    for (int i = 0; i < len; i += 4) {
        int chunk_len = (i + 4 <= len) ? 4 : len - i;
        for (int j = 0; j < chunk_len; j++) {
            temp[j] = string_r[i + chunk_len - 1 - j];
        }
        temp[chunk_len] = '\0'; 
        strcat(rev, temp);
    }
}

int main(int argc, char *argv[]) {
    if (argc < 3) {
        printf("Arguments needed:\n '-s' : reverse a string for every 4 characters\n");
        return 1;
    }else if(argc > 3){
	printf("only two arguments could be passed");
	return 1;	
    }

    if (strcmp(argv[1], "-s") == 0) {
        char *string = argv[2];
        char reverse[100] = "";

        reverse_string(string, reverse);
        
        printf("Given string: %s\n", string);
        printf("Reversed string: %s\n", reverse);
    } else {
        printf("Only '-s' option is supported. Given: %s\n", argv[1]);
        return 1;
    }

    return 0;
}
